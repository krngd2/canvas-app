!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementMap={layerContainer:"layers",canvasContainer:"canvas-container"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.createMarker()}return e.prototype.createMarker=function(){this.el=document.createElement("div")},e.prototype.getElement=function(){return this.el},e.prototype.setPosition=function(e){this.x=(e.width-20)/2+e.x,this.y=(e.height-20)/2+e.y,this.setCss()},e.prototype.setCss=function(){this.el.style.cssText="height: 20px; width: 20px; background: red; position: absolute; left: "+this.x+"px; top: "+this.y+"px;\n        cursor: move; visibility: visible;\n        "},e.prototype.hide=function(){this.el.style.cssText="height: 20px; width: 20px; background: red; position: absolute; left: "+this.x+"px; top: "+this.y+"px;\n        visibility: hidden;"},e}();t.DragCenter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.TOP_LEFT="nw",e.TOP_RIGHT="ne",e.BOTTOM_LEFT="sw",e.BOTTOM_RIGHT="se"}(t.AnchorType||(t.AnchorType={}));var i=function(){function e(e,t,n){this.x=e,this.y=t,this.type=n,this.createMarker()}return e.prototype.createMarker=function(){this.el=document.createElement("div")},e.prototype.getElement=function(){return this.el},e.prototype.setPosition=function(e,t){this.x=e-5,this.y=t-5,this.setCss()},e.prototype.setCss=function(){this.el.style.cssText="height: 10px; width: 10px; background: red; position: absolute; left: "+this.x+"px; top: "+this.y+"px;\n        cursor: "+this.type+"-resize; visibility: visible;\n        "},e.prototype.hide=function(){this.el.style.cssText="height: 10px; width: 10px; background: red; position: absolute; left: "+this.x+"px; top: "+this.y+"px;\n        visibility: hidden;"},e}();t.DragAnchor=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e,t){this.x0=e,this.y0=t}}();t.Rectangle=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=n(3),s=n(2),a=n(1),c=function(){function e(e,t){this.isDirty=!1,this.isDrawing=!1,this.isResizing=!1,this.isDragging=!1,this.anchors=[],this.zIndex=e,this.containerEl=document.getElementById(i.ElementMap.canvasContainer),this.createSheet(),t&&(this.rectangle=JSON.parse(JSON.stringify(t)),this.copySheet())}return e.prototype.createSheet=function(){this.canvasContainer=document.createElement("div"),this.canvasContainer.classList.add("canvas"),this.canvasContainer.style.zIndex="999",this.canvas=document.createElement("canvas"),this.canvas.height=window.innerHeight,this.canvas.width=window.innerWidth/12*10,this.canvasContainer.appendChild(this.canvas),this.containerEl.appendChild(this.canvasContainer),this.context=this.canvas.getContext("2d"),this.context.strokeStyle="rgb(255,85,73)",this.initializeAnchors(),this.registerEvents()},e.prototype.initializeAnchors=function(){var e=this;this.anchors.push(new s.DragAnchor(0,0,s.AnchorType.TOP_LEFT)),this.anchors.push(new s.DragAnchor(0,0,s.AnchorType.TOP_RIGHT)),this.anchors.push(new s.DragAnchor(0,0,s.AnchorType.BOTTOM_LEFT)),this.anchors.push(new s.DragAnchor(0,0,s.AnchorType.BOTTOM_RIGHT)),this.anchors.forEach(function(t){return e.canvasContainer.appendChild(t.getElement())}),this.centerAnchor=new a.DragCenter,this.canvasContainer.appendChild(this.centerAnchor.getElement())},e.prototype.drawAnchors=function(){this.anchors[0].setPosition(this.rectangle.x,this.rectangle.y),this.anchors[1].setPosition(this.rectangle.x+this.rectangle.width,this.rectangle.y),this.anchors[2].setPosition(this.rectangle.x,this.rectangle.y+this.rectangle.height),this.anchors[3].setPosition(this.rectangle.x+this.rectangle.width,this.rectangle.y+this.rectangle.height),this.centerAnchor.setPosition(this.rectangle)},e.prototype.deleteAnchors=function(){this.anchors.forEach(function(e){return e.hide()}),this.centerAnchor.hide()},e.prototype.registerEvents=function(){this.registerMouseDown(),this.registerMouseMove(),this.registerMouseUp(),this.registerActiveEvent(),this.registerInactiveEvent(),this.registerAnchorEvents(),this.registerDragEvent()},e.prototype.copySheet=function(){this.context.strokeRect(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height),this.isDirty=!0,this.canvas.dispatchEvent(new CustomEvent("active"))},e.prototype.deleteSheet=function(){this.containerEl.removeChild(this.canvasContainer),this.deleteAnchors()},e.prototype.eventDefaultActions=function(e){e.stopPropagation(),this.isDirty=!0},e.prototype.registerMouseDown=function(){var e=this;this.canvas.addEventListener("mousedown",function(t){e.isDirty?e.canvas.dispatchEvent(new CustomEvent("invalid")):(e.context=e.canvas.getContext("2d"),e.eventDefaultActions(t),e.rectangle=new r.Rectangle(t.layerX,t.layerY),e.isDrawing=!0)})},e.prototype.registerMouseMove=function(){var e=this;this.canvas.addEventListener("mousemove",function(t){(e.isDrawing||e.isResizing||e.isDragging)&&(e.eventDefaultActions(t),e.isDrawing||e.isResizing?(e.rectangle.x=Math.min(e.rectangle.x0,t.layerX),e.rectangle.y=Math.min(e.rectangle.y0,t.layerY),e.rectangle.width=Math.abs(t.layerX-e.rectangle.x0),e.rectangle.height=Math.abs(t.layerY-e.rectangle.y0)):e.isDragging&&(e.rectangle.x=t.layerX-e.rectangle.width/2,e.rectangle.y=t.layerY-e.rectangle.height/2),e.context.clearRect(0,0,e.canvas.width,e.canvas.height),e.rectangle.width&&e.rectangle.height&&e.context.strokeRect(e.rectangle.x,e.rectangle.y,e.rectangle.width,e.rectangle.height))})},e.prototype.registerMouseUp=function(){var e=this;this.canvas.addEventListener("mouseup",function(t){e.isDrawing&&!e.rectangle.height&&(e.isDirty=!1),e.isResizing&&(e.isResizing=!1),e.isDrawing&&(e.isDrawing=!1),e.isDragging&&(e.isDragging=!1),e.rectangle.height&&e.canvas.dispatchEvent(new CustomEvent("active"))})},e.prototype.registerActiveEvent=function(){var e=this;this.canvas.addEventListener("active",function(){e.context.strokeStyle="red",e.refreshRectangle(),e.drawAnchors(),e.canvasContainer.style.zIndex="999"})},e.prototype.registerInactiveEvent=function(){var e=this;this.canvas.addEventListener("inactive",function(){e.context.strokeStyle="black",e.refreshRectangle(),e.deleteAnchors(),e.canvasContainer.style.zIndex=""+e.zIndex})},e.prototype.registerAnchorEvents=function(){var e=this;this.anchors.forEach(function(t){!function(e,t){e.getElement().addEventListener("mousedown",function(){switch(t.isResizing=!0,t.deleteAnchors(),e.type){case s.AnchorType.BOTTOM_LEFT:t.rectangle.x0=t.rectangle.x+t.rectangle.width,t.rectangle.y0=t.rectangle.y;break;case s.AnchorType.BOTTOM_RIGHT:t.rectangle.x0=t.rectangle.x,t.rectangle.y0=t.rectangle.y;break;case s.AnchorType.TOP_RIGHT:t.rectangle.y0=t.rectangle.y+t.rectangle.height,t.rectangle.x0=t.rectangle.x;break;case s.AnchorType.TOP_LEFT:t.rectangle.x0=t.rectangle.x+t.rectangle.width,t.rectangle.y0=t.rectangle.y+t.rectangle.height}})}(t,e)})},e.prototype.registerDragEvent=function(){var e=this;this.centerAnchor.getElement().addEventListener("mousedown",function(){e.isDragging=!0,e.deleteAnchors()})},e.prototype.refreshRectangle=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.strokeRect(this.rectangle.x,this.rectangle.y,this.rectangle.width,this.rectangle.height)},e}();t.Canvas=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=function(){function e(e,t){this.id=e,this.layerName="Layer "+e,this.createElement(),this.canvas=t?new i.Canvas(this.id,t):new i.Canvas(this.id)}return e.prototype.createElement=function(){this.element=document.createElement("li");var e=document.createElement("span");e.innerText=this.layerName,this.closeButton=document.createElement("small"),this.closeButton.classList.add("u-pull-right"),this.closeButton.innerHTML="x",this.element.appendChild(e).appendChild(this.closeButton),this.registerListeners(),this.markSelected()},e.prototype.registerListeners=function(){this.registerCloseListener(),this.registerSelectListener()},e.prototype.registerCloseListener=function(){var e=this;this.closeButton.addEventListener("click",function(t){t.stopPropagation(),e.element.remove(),e.canvas.deleteSheet(),e.element.dispatchEvent(new CustomEvent("close"))})},e.prototype.registerSelectListener=function(){var e=this;this.element.addEventListener("click",function(){e.element.dispatchEvent(new CustomEvent("selected"))})},e.prototype.markSelected=function(){this.element.classList.add("selected"),this.canvas&&this.canvas.canvas.dispatchEvent(new CustomEvent("active"))},e.prototype.unSelect=function(){this.element.classList.remove("selected"),this.canvas&&this.canvas.canvas.dispatchEvent(new CustomEvent("inactive"))},e.prototype.getLayerElement=function(){return this.element},e}();t.Layer=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=n(0),s=function(){function e(){this.layers={},this.layerCounter=0,this.container=document.getElementById(r.ElementMap.layerContainer),this.addNewLayer()}return e.prototype.addNewLayer=function(e){this.layerCounter++,this.unselectLayers();var t=new i.Layer(this.layerCounter,e);this.layers[t.layerName]=t,this.registerLayerListeners(t),this.container.appendChild(t.element),this.activeLayer=t.layerName,console.log(this.layers)},e.prototype.registerLayerListeners=function(e){var t=this;e.getLayerElement().addEventListener("close",function(){delete t.layers[e.layerName],t.resetLayerCount()}),e.getLayerElement().addEventListener("selected",function(){t.unselectLayers(),e.markSelected(),t.activeLayer=e.layerName})},e.prototype.unselectLayers=function(){var e=this;Object.keys(this.layers).forEach(function(t){return e.layers[t].unSelect()})},e.prototype.resetLayerCount=function(){0===Object.keys(this.layers).length&&(this.layerCounter=0)},e.prototype.clearSheet=function(){var e=this;Object.keys(this.layers).forEach(function(t){return e.layers[t].closeButton.dispatchEvent(new Event("click"))}),this.layerCounter=0,this.addNewLayer()},e.prototype.copySheet=function(){this.copiedRectangle=this.layers[this.activeLayer].canvas.rectangle},e.prototype.pasteSheet=function(){this.addNewLayer(this.copiedRectangle)},e}();t.LayerManager=s},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(8);var i=new(n(6).LayerManager);document.getElementById("clearSheet").addEventListener("click",function(){i.clearSheet()}),document.getElementById("addLayer").addEventListener("click",function(){i.addNewLayer()}),document.addEventListener("copy",function(e){i.copySheet()}),document.addEventListener("paste",function(e){i.pasteSheet()})}]);